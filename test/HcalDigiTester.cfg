# Configuration file for EventSetupTest_t

process TEST = {

#  path p = { mix, hcalSim, hcalTrigPrim, ecalSim , hcalDumper}
  path p = { mix, hcalSim, hcalDigiAnalyzer}


module hcalDigiAnalyzer = HcalDigiTester{}

   #Geometry
   es_source = XMLIdealGeometryESSource 
   { 
      # FileInPath GeometryConfiguration = "SimG4Core/Application/test/SimConfiguration.xml"
      FileInPath GeometryConfiguration = "Geometry/CMSCommonData/data/SimConfiguration.xml"
      #the proper root node is set in the xml file
      string rootNodeName = ""
   }

    module mix = MixingModule {
         secsource input = PoolRASource  {
#			       untracked vstring fileNames = {'/afs/cern.ch/user/g/govoni/public/CMSSW/rootfiles/simevent.root'}
			       untracked vstring fileNames = {'file:/localscratch/dkonst/WORK/test/CMSSW_0_6_0_pre1/src/Validation/HcalDigis/test/simevents.root'}
                   string type = "poisson"
                   double averageNumber = 0
                   int32 minBunch = xxx
                   int32 maxBunch = xxx
                   int32 seed = 1234567
          }
          int32 bunchspace = 25
   }

   es_module = EcalBarrelGeometryEP {}
   es_module = EcalEndcapGeometryEP {}
   es_module = HcalHardcodeGeometryEP {}
   es_module = CaloTowerHardcodeGeometryEP {}
   es_module = CaloGeometryBuilder {}



#  module print = AsciiOutputModule { }
	
#  module HcalDbAnalyzer = HcalDbAnalyzer {}

  module ecalSim = EcalDigiProducer {
    untracked bool doNoise = false
  }

  module hcalSim = HcalDigiProducer {
    untracked bool doNoise = false
  }


#  module hcalTrigPrim = HcalTrigPrimRecHitProducer {}
#  module hcalDumper = HcalDigiDump {}
#  module ecalDumper = EcalDigiDumperModule {}



	
  es_module = HcalDbProducer {}

  es_source es_hardcode = HcalHardcodeCalibrations
   {
      untracked vstring toGet =
      {
         "Pedestals", "PedestalWidths",
         "Gains", "GainWidths",
         "QIEShape", "QIEData",
         "ChannelQuality", "ElectronicsMap"
      }
   }

//  source = EmptySource {
//    untracked int32 maxEvents = 1
//    untracked uint32 firstRun = 1 
//    untracked uint32 numberEventsInRun = 1 
//  }

  source = PoolSource {
     untracked vstring fileNames = {'file:/localscratch/dkonst/WORK/test/CMSSW_0_6_0_pre1/src/Validation/HcalDigis/test/simevents.root'}
     untracked int32 maxEvents = -1
     untracked uint32 debugVebosity = 10
     untracked bool   debugFlag     = true
  }

//   module o1 = PoolOutputModule 
//   { 
//      untracked string fileName = "evtgen_detsim_digi_pileup1.root" 
//   }
   
//   endpath outpath = { o1 }

}
